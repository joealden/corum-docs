# New Post Page

## Client Side

This page is accessible from every subforum via the 'New Post' button. The
subforum page generates this link based on its own `:subforum` path variable.
(For example, the 'New Post' button on the 'programming' subforum will link to
`/subforum/programming/new`)

The reason this page is specific subforum is for the following reasons:

* A post belongs to a single subforum, so it wouldn't make sense to make it a
  generalized page
* By making it specific to a certain subforum, the page knows what subforum to
  add the post to
* In the future, there could possibly be a 'New Subforum Page' at the path
  `/subforum/new`

The new post page will contain:

* The page title ('New Post')
* A text box for the new post's title to be entered
* A text area for the new post's content to be entered
* A 'Create Post' button that submits the post

To submit a post, both the post title and post content fields must be filled in.
When a post has been created, the site will redirect the user to the new post.

Now this post will be be:

* Available in the corresponding subforum page
* Able to be upvoted and downvoted
* Able to be commented on

As mentioned in the 'Subforum page' section, the 'New Post' button will be
disabled to users that are not logged in. However, a user that is not logged in
could still visit the page via the url bar. If a user that is not logged in does
this, the page should display a message to the user telling them they are not
logged in.

## Server Side

The CRUD API generated by graphcool exposes a way to create new items of data
through a GraphQL mutation. These mutations are called `createType`. 'Type' in
this case is `Post`, so the mutation is called `createPost`. The 4 pieces of
data that this mutation in particular takes is `subforum`, `title`, `authorId`
and `content`.

These pieces of data are all available to the client when they send a request:

* `subforum` can be found in the `:subforum` path variable
* `title` can be found in the text box on the page
* `content` can be found in the text area on the page
* `authorId` can be found in the clients local storage, as it was stored when
  the user logged in
