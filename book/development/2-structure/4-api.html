<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>API Architecture - Corum Project Report</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="The A Level Computing Coursework Project 'Corum' by Joe Alden">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <base href="../../">

        <link rel="stylesheet" href="book.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <link rel="shortcut icon" href="favicon.png">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme -->
        

        

        <!-- Fetch Clipboard.js from CDN but have a local fallback -->
        <script src="https://cdn.jsdelivr.net/clipboard.js/1.6.1/clipboard.min.js"></script>
        <script>
            if (typeof Clipboard == 'undefined') {
                document.write(unescape("%3Cscript src='clipboard.min.js'%3E%3C/script%3E"));
            }
        </script>

        <noscript>
            <style type="text/css">
                .javascript-only {
                    display: none;
                }
            </style>
        </noscript>

    </head>
    <body class="light">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { } 
            if (theme === null || theme === undefined) { theme = 'light'; }
            document.body.className = theme;
            document.querySelector('html').className = theme;
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <ol class="chapter"><li class="affix"><a href="index.html">Foreword</a></li><li class="affix"><a href="SUMMARY.html">Contents Page</a></li><li><a href="analysis/1-index/index.html"><strong aria-hidden="true">1.</strong> Analysis</a></li><li><ol class="section"><li><a href="analysis/2-idea/1-index.html"><strong aria-hidden="true">1.1.</strong> The Idea</a></li><li><ol class="section"><li><a href="analysis/2-idea/2-redditAlternative.html"><strong aria-hidden="true">1.1.1.</strong> Reddit Alterative</a></li><li><a href="analysis/2-idea/3-selfGoverning.html"><strong aria-hidden="true">1.1.2.</strong> Self Governing</a></li><li><a href="analysis/2-idea/4-openPlatform.html"><strong aria-hidden="true">1.1.3.</strong> Open Platform</a></li><li><a href="analysis/2-idea/5-modernInterface.html"><strong aria-hidden="true">1.1.4.</strong> Modern Interface</a></li></ol></li><li><a href="analysis/3-investigation/1-index.html"><strong aria-hidden="true">1.2.</strong> The Investigation</a></li><li><ol class="section"><li><a href="analysis/3-investigation/2-interviews.html"><strong aria-hidden="true">1.2.1.</strong> Interviews</a></li><li><a href="analysis/3-investigation/3-endUser.html"><strong aria-hidden="true">1.2.2.</strong> The End User</a></li><li><a href="analysis/3-investigation/4-focusGroup.html"><strong aria-hidden="true">1.2.3.</strong> The Focus Group</a></li><li><a href="analysis/3-investigation/5-existingSystems.html"><strong aria-hidden="true">1.2.4.</strong> Existing Systems</a></li></ol></li><li><a href="analysis/4-analysis/1-index.html"><strong aria-hidden="true">1.3.</strong> The Analysis</a></li><li><ol class="section"><li><a href="analysis/4-analysis/2-essentialFeatures.html"><strong aria-hidden="true">1.3.1.</strong> Essential Features</a></li><li><a href="analysis/4-analysis/3-computationalMethods.html"><strong aria-hidden="true">1.3.2.</strong> Computational Methods</a></li><li><a href="analysis/4-analysis/4-successCriteria.html"><strong aria-hidden="true">1.3.3.</strong> Success Criteria</a></li><li><a href="analysis/4-analysis/5-limitations.html"><strong aria-hidden="true">1.3.4.</strong> Limitations</a></li><li><a href="analysis/4-analysis/6-hardwareSoftware.html"><strong aria-hidden="true">1.3.5.</strong> Requirements</a></li></ol></li></ol></li><li><a href="design/1-index/index.html"><strong aria-hidden="true">2.</strong> Design</a></li><li><ol class="section"><li><a href="design/2-gui/index.html"><strong aria-hidden="true">2.1.</strong> GUI Design</a></li><li><a href="design/3-components/1-index.html"><strong aria-hidden="true">2.2.</strong> Component Design</a></li><li><ol class="section"><li><a href="design/3-components/2-logo.html"><strong aria-hidden="true">2.2.1.</strong> Logo</a></li><li><a href="design/3-components/3-header.html"><strong aria-hidden="true">2.2.2.</strong> Header</a></li><li><a href="design/3-components/4-navigation.html"><strong aria-hidden="true">2.2.3.</strong> Navigation</a></li><li><a href="design/3-components/5-main.html"><strong aria-hidden="true">2.2.4.</strong> Main Content</a></li><li><a href="design/3-components/6-footer.html"><strong aria-hidden="true">2.2.5.</strong> Footer</a></li></ol></li><li><a href="design/4-api/1-index.html"><strong aria-hidden="true">2.3.</strong> API Design</a></li><li><ol class="section"><li><a href="design/4-api/2-schema.html"><strong aria-hidden="true">2.3.1.</strong> API Schema</a></li></ol></li><li><a href="design/5-route/1-index.html"><strong aria-hidden="true">2.4.</strong> Route Design</a></li><li><ol class="section"><li><a href="design/5-route/2-summary.html"><strong aria-hidden="true">2.4.1.</strong> Route Summary</a></li><li><a href="design/5-route/3-home.html"><strong aria-hidden="true">2.4.2.</strong> Home Page</a></li><li><a href="design/5-route/4-login.html"><strong aria-hidden="true">2.4.3.</strong> Login Page</a></li><li><a href="design/5-route/5-signup.html"><strong aria-hidden="true">2.4.4.</strong> Signup Page</a></li><li><a href="design/5-route/6-subforum.html"><strong aria-hidden="true">2.4.5.</strong> Subforum Page</a></li><li><a href="design/5-route/7-post.html"><strong aria-hidden="true">2.4.6.</strong> Post Page</a></li><li><a href="design/5-route/8-newPost.html"><strong aria-hidden="true">2.4.7.</strong> New Post Page</a></li><li><a href="design/5-route/9-error.html"><strong aria-hidden="true">2.4.8.</strong> Error Page</a></li></ol></li><li><a href="design/6-testing/1-index.html"><strong aria-hidden="true">2.5.</strong> Testing</a></li><li><ol class="section"><li><a href="design/6-testing/2-linter.html"><strong aria-hidden="true">2.5.1.</strong> Linter</a></li><li><a href="design/6-testing/3-plan.html"><strong aria-hidden="true">2.5.2.</strong> Test Plan</a></li><li><a href="design/6-testing/4-data.html"><strong aria-hidden="true">2.5.3.</strong> Test Data</a></li><li><a href="design/6-testing/5-automation.html"><strong aria-hidden="true">2.5.4.</strong> Automated Testing</a></li></ol></li></ol></li><li><a href="development/1-index/index.html"><strong aria-hidden="true">3.</strong> Implementation</a></li><li><ol class="section"><li><a href="development/2-structure/1-index.html"><strong aria-hidden="true">3.1.</strong> Structure of Corum</a></li><li><ol class="section"><li><a href="development/2-structure/2-monolithMicro.html"><strong aria-hidden="true">3.1.1.</strong> Monolith vs Micro</a></li><li><a href="development/2-structure/3-client.html"><strong aria-hidden="true">3.1.2.</strong> Client Architecture</a></li><li><a href="development/2-structure/4-api.html" class="active"><strong aria-hidden="true">3.1.3.</strong> API Architecture</a></li></ol></li><li><a href="development/3-iterations/1-index.html"><strong aria-hidden="true">3.2.</strong> Iteration Stages</a></li><li><ol class="section"><li><a href="development/3-iterations/2-versionControl.html"><strong aria-hidden="true">3.2.1.</strong> Version Control</a></li><li><a href="development/3-iterations/3-changes.html"><strong aria-hidden="true">3.2.2.</strong> Iteration Stages</a></li><li><a href="development/3-iterations/4-feedback.html"><strong aria-hidden="true">3.2.3.</strong> User Feedback</a></li></ol></li><li><a href="development/4-problems/1-index.html"><strong aria-hidden="true">3.3.</strong> Problems experienced</a></li><li><ol class="section"><li><a href="development/4-problems/2-client.html"><strong aria-hidden="true">3.3.1.</strong> Client Problems</a></li><li><a href="development/4-problems/3-api.html"><strong aria-hidden="true">3.3.2.</strong> API Problems</a></li></ol></li><li><a href="development/6-codeAnalysis/1-index.html"><strong aria-hidden="true">3.4.</strong> Code Analysis</a></li><li><ol class="section"><li><a href="development/6-codeAnalysis/2-client.html"><strong aria-hidden="true">3.4.1.</strong> Client Analysis</a></li><li><a href="development/6-codeAnalysis/3-api.html"><strong aria-hidden="true">3.4.2.</strong> API Analysis</a></li></ol></li></ol></li><li><a href="evaluation/1-index/index.html"><strong aria-hidden="true">4.</strong> Evaluation</a></li><li><ol class="section"><li><a href="evaluation/2-testing/1-index.html"><strong aria-hidden="true">4.1.</strong> Testing</a></li><li><ol class="section"><li><a href="evaluation/2-testing/2-signup.html"><strong aria-hidden="true">4.1.1.</strong> Signup Page</a></li><li><a href="evaluation/2-testing/3-login.html"><strong aria-hidden="true">4.1.2.</strong> Login Page</a></li><li><a href="evaluation/2-testing/4-navigation.html"><strong aria-hidden="true">4.1.3.</strong> Navigation</a></li><li><a href="evaluation/2-testing/5-subforum.html"><strong aria-hidden="true">4.1.4.</strong> Subforum Page</a></li><li><a href="evaluation/2-testing/6-post.html"><strong aria-hidden="true">4.1.5.</strong> Post Page</a></li><li><a href="evaluation/2-testing/7-newPost.html"><strong aria-hidden="true">4.1.6.</strong> New Post Page</a></li><li><a href="evaluation/2-testing/8-newSubforum.html"><strong aria-hidden="true">4.1.7.</strong> New Subforum Page</a></li></ol></li><li><a href="evaluation/3-usabilityFeatures/1-index.html"><strong aria-hidden="true">4.2.</strong> Usability Features</a></li><li><a href="evaluation/4-evaluation/1-index.html"><strong aria-hidden="true">4.3.</strong> Final Evaluation</a></li></ol></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons javascript-only">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light <span class="default">(default)</span></button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Corum Project Report</h1> 

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                        </div>
                    </div>
                </div>

                
                <div id="searchbar-outer" class="searchbar-outer">
                    <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                </div>
                <div id="searchresults-outer" class="searchresults-outer">
                    <div class="searchresults-header" id="searchresults-header"></div>
                    <ul id="searchresults">
                    </ul>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <a class="header" href="development/2-structure/4-api.html#api-architecture" id="api-architecture"><h1>API Architecture</h1></a>
<a class="header" href="development/2-structure/4-api.html#graphcool" id="graphcool"><h2>Graphcool</h2></a>
<p>As mentioned before in both the analysis and design sections, I am using the
library and service known as Graphcool. Graphcool provides an easily way to
create production ready GraphQL servers in a small amount of time. It acts
almost like a database, in that it provides a permanent data store as well as
CRUD operations to access and modify the data.</p>
<p>These CRUD operations are exposed through a GraphQL API. The way this works is
that it generates a CRUD API with GraphQL queries and mutations based on the
schema you give it. The schema can be found in the design section of the API.</p>
<a class="header" href="development/2-structure/4-api.html#why-graphcool" id="why-graphcool"><h3>Why Graphcool?</h3></a>
<p>Graphcool is like Nuxt for a GraphQL server. Nuxt provides useful abstractions
on top of Vue to provide a better developer experience and a faster development
cycle. Graphcool abstracts away a lot of the implementation details of the
GraphQL API and allows you to declaratively specify what data you want to store.</p>
<p>This means that I don't have to reinvent the wheel, and I have more development
time to spend on other things.</p>
<a class="header" href="development/2-structure/4-api.html#how-graphcool-works" id="how-graphcool-works"><h3>How Graphcool Works</h3></a>
<a class="header" href="development/2-structure/4-api.html#the-command-line-interface-cli" id="the-command-line-interface-cli"><h4>The Command Line Interface (CLI)</h4></a>
<p>Like Nuxt, Graphcool provides a CLI (called <code>gcf</code>) that expose two important
commands:</p>
<a class="header" href="development/2-structure/4-api.html#gcf-deploy" id="gcf-deploy"><h5><code>gcf deploy</code></h5></a>
<p>This command deploys the API to one of the available public Graphcool servers.
Under the hood, graphcool reads a file named <code>graphcool.yml</code> and builds the API
using it, then it sends this build bundle up to the server.</p>
<a class="header" href="development/2-structure/4-api.html#gcf-playground" id="gcf-playground"><h5><code>gcf playground</code></h5></a>
<p>This commands opens a web browser at the URL of the deployed service and lets
you explore and test your API.</p>
<a class="header" href="development/2-structure/4-api.html#configuring-graphcool" id="configuring-graphcool"><h4>Configuring Graphcool</h4></a>
<p>When running the <code>gcf deploy</code> command, Graphcool looks and reads a file named
<code>graphcool.yml</code>. This file contains all of the information Graphcool needs to
create the API server. The following sub sections will described what each top
level property does. For brevity, the entire contents of Corum's <code>graphcool.yml</code>
file is not shown in the code analysis section, however, like anything in Corum,
the full file can be found at the projects Github repository.</p>
<a class="header" href="development/2-structure/4-api.html#types" id="types"><h5><code>types</code></h5></a>
<p>This property expects a string containing the relative path of the <code>.graphql</code>
file that contains the API schema. This file must be write in the Schema
Definition Language (SDL) that is part of the official GraphQL specification.</p>
<a class="header" href="development/2-structure/4-api.html#functions" id="functions"><h5><code>functions</code></h5></a>
<p>This is where you specify custom resolvers and hook functions that are needed
for the API. The property expects an array of objects that describe what the
function does and where to find the code for it. Every function object should
have a <code>type</code> and a <code>handler</code> property. The <code>type</code> property is used to tell
Graphcool if the function is a resolver or a hook function. The <code>handler</code>
property tells Graphcool where to find the code for the function.</p>
<p>If the type of the function is a resolver, the function object should also
specify a <code>schema</code> string that points to the file that contains what data types
the resolver should expect and what data types it should return.</p>
<p>If the type of the function is a hook function, the function object should also
specify a <code>operation</code> property. This expect a string that tells Graphcool what
data type and what CRUD operation to trigger on. For example, Corum has a simple
hook function that initializes the vote count of a post to 0 when it is created.
The operation property of this hook function is <code>Post.create</code>.</p>
<a class="header" href="development/2-structure/4-api.html#roottokens" id="roottokens"><h5><code>rootTokens</code></h5></a>
<p>The property expects an array of strings. Each string should map to an existing
function that was defined in the <code>functions</code> property. If the function is listed
under this property, the function is given the highest level of permissions
(Also known as root). This allows the functions to perform queries and mutations
to the API that even authenticated users cannot such as getting the password
hash for a user. This is needed because functions such as the <code>login</code> resolver
need to access this kind of sensitive data to work.</p>
<a class="header" href="development/2-structure/4-api.html#permissions" id="permissions"><h5><code>permissions</code></h5></a>
<p>As the permissions section of the <code>graphcool.yml</code> file is explained in the code
analysis section, I will not repeat the same information. For this reason, look
at the code analysis section for an explanation of how permissions work.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="development/2-structure/3-client.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="development/3-iterations/1-index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="development/2-structure/3-client.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="development/3-iterations/1-index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>


        <!-- Local fallback for Font Awesome -->
        <script>
            if (getComputedStyle(document.querySelector(".fa")).fontFamily !== "FontAwesome") {
                var link = document.createElement('link');
                link.rel = 'stylesheet';
                link.type = 'text/css';
                link.href = '_FontAwesome/css/font-awesome.css';
                document.head.insertBefore(link, document.head.firstChild)
            }
        </script>

        

        

        

        
        <script src="searchindex.js" type="text/javascript" charset="utf-8"></script>
        
        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        

        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS script -->
        

    </body>
</html>
