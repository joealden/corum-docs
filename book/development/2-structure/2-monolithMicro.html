<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Monolith vs Micro - Corum Project Report</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="The A Level Computing Coursework Project 'Corum' by Joe Alden">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <base href="../../">

        <link rel="stylesheet" href="book.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <link rel="shortcut icon" href="favicon.png">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme -->
        

        

        <!-- Fetch Clipboard.js from CDN but have a local fallback -->
        <script src="https://cdn.jsdelivr.net/clipboard.js/1.6.1/clipboard.min.js"></script>
        <script>
            if (typeof Clipboard == 'undefined') {
                document.write(unescape("%3Cscript src='clipboard.min.js'%3E%3C/script%3E"));
            }
        </script>

    </head>
    <body class="light">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { } 
            if (theme === null || theme === undefined) { theme = 'light'; }
            document.body.className = theme;
            document.querySelector('html').className = theme;
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            document.querySelector('html').classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <ol class="chapter"><li class="affix"><a href="index.html">Foreword</a></li><li class="affix"><a href="SUMMARY.html">Contents Page</a></li><li><a href="analysis/1-index/index.html"><strong aria-hidden="true">1.</strong> Analysis</a></li><li><ol class="section"><li><a href="analysis/2-idea/1-index.html"><strong aria-hidden="true">1.1.</strong> The Idea</a></li><li><ol class="section"><li><a href="analysis/2-idea/2-redditAlternative.html"><strong aria-hidden="true">1.1.1.</strong> Reddit Alterative</a></li><li><a href="analysis/2-idea/3-selfGoverning.html"><strong aria-hidden="true">1.1.2.</strong> Self Governing</a></li><li><a href="analysis/2-idea/4-openPlatform.html"><strong aria-hidden="true">1.1.3.</strong> Open Platform</a></li><li><a href="analysis/2-idea/5-modernInterface.html"><strong aria-hidden="true">1.1.4.</strong> Modern Interface</a></li></ol></li><li><a href="analysis/3-investigation/1-index.html"><strong aria-hidden="true">1.2.</strong> The Investigation</a></li><li><ol class="section"><li><a href="analysis/3-investigation/2-interviews.html"><strong aria-hidden="true">1.2.1.</strong> Interviews</a></li><li><a href="analysis/3-investigation/3-endUser.html"><strong aria-hidden="true">1.2.2.</strong> The End User</a></li><li><a href="analysis/3-investigation/4-focusGroup.html"><strong aria-hidden="true">1.2.3.</strong> The Focus Group</a></li><li><a href="analysis/3-investigation/5-existingSystems.html"><strong aria-hidden="true">1.2.4.</strong> Existing Systems</a></li></ol></li><li><a href="analysis/4-analysis/1-index.html"><strong aria-hidden="true">1.3.</strong> The Analysis</a></li><li><ol class="section"><li><a href="analysis/4-analysis/2-essentialFeatures.html"><strong aria-hidden="true">1.3.1.</strong> Essential Features</a></li><li><a href="analysis/4-analysis/3-computationalMethods.html"><strong aria-hidden="true">1.3.2.</strong> Computational Methods</a></li><li><a href="analysis/4-analysis/4-successCriteria.html"><strong aria-hidden="true">1.3.3.</strong> Success Criteria</a></li><li><a href="analysis/4-analysis/5-limitations.html"><strong aria-hidden="true">1.3.4.</strong> Limitations</a></li><li><a href="analysis/4-analysis/6-hardwareSoftware.html"><strong aria-hidden="true">1.3.5.</strong> Requirements</a></li></ol></li></ol></li><li><a href="design/1-index/index.html"><strong aria-hidden="true">2.</strong> Design</a></li><li><ol class="section"><li><a href="design/2-gui/index.html"><strong aria-hidden="true">2.1.</strong> GUI Design</a></li><li><a href="design/3-components/1-index.html"><strong aria-hidden="true">2.2.</strong> Component Design</a></li><li><ol class="section"><li><a href="design/3-components/2-logo.html"><strong aria-hidden="true">2.2.1.</strong> Logo</a></li><li><a href="design/3-components/3-header.html"><strong aria-hidden="true">2.2.2.</strong> Header</a></li><li><a href="design/3-components/4-navigation.html"><strong aria-hidden="true">2.2.3.</strong> Navigation</a></li><li><a href="design/3-components/5-main.html"><strong aria-hidden="true">2.2.4.</strong> Main Content</a></li><li><a href="design/3-components/6-footer.html"><strong aria-hidden="true">2.2.5.</strong> Footer</a></li></ol></li><li><a href="design/4-api/1-index.html"><strong aria-hidden="true">2.3.</strong> API Design</a></li><li><ol class="section"><li><a href="design/4-api/2-schema.html"><strong aria-hidden="true">2.3.1.</strong> API Schema</a></li></ol></li><li><a href="design/5-route/1-index.html"><strong aria-hidden="true">2.4.</strong> Route Design</a></li><li><ol class="section"><li><a href="design/5-route/2-summary.html"><strong aria-hidden="true">2.4.1.</strong> Route Summary</a></li><li><a href="design/5-route/3-home.html"><strong aria-hidden="true">2.4.2.</strong> Home Page</a></li><li><a href="design/5-route/4-login.html"><strong aria-hidden="true">2.4.3.</strong> Login Page</a></li><li><a href="design/5-route/5-signup.html"><strong aria-hidden="true">2.4.4.</strong> Signup Page</a></li><li><a href="design/5-route/6-subforum.html"><strong aria-hidden="true">2.4.5.</strong> Subforum Page</a></li><li><a href="design/5-route/7-post.html"><strong aria-hidden="true">2.4.6.</strong> Post Page</a></li><li><a href="design/5-route/8-newPost.html"><strong aria-hidden="true">2.4.7.</strong> New Post Page</a></li><li><a href="design/5-route/9-error.html"><strong aria-hidden="true">2.4.8.</strong> Error Page</a></li></ol></li><li><a href="design/6-testing/1-index.html"><strong aria-hidden="true">2.5.</strong> Testing</a></li><li><ol class="section"><li><a href="design/6-testing/2-linter.html"><strong aria-hidden="true">2.5.1.</strong> Linter</a></li><li><a href="design/6-testing/3-plan.html"><strong aria-hidden="true">2.5.2.</strong> Test Plan</a></li><li><a href="design/6-testing/4-data.html"><strong aria-hidden="true">2.5.3.</strong> Test Data</a></li><li><a href="design/6-testing/5-automation.html"><strong aria-hidden="true">2.5.4.</strong> Automated Testing</a></li></ol></li></ol></li><li><a href="development/1-index/index.html"><strong aria-hidden="true">3.</strong> Implementation</a></li><li><ol class="section"><li><a href="development/2-structure/1-index.html"><strong aria-hidden="true">3.1.</strong> Structure of Corum</a></li><li><ol class="section"><li><a href="development/2-structure/2-monolithMicro.html" class="active"><strong aria-hidden="true">3.1.1.</strong> Monolith vs Micro</a></li><li><a href="development/2-structure/3-client.html"><strong aria-hidden="true">3.1.2.</strong> Client Architecture</a></li><li><a href="development/2-structure/4-api.html"><strong aria-hidden="true">3.1.3.</strong> API Architecture</a></li></ol></li><li><a href="development/3-iterations/1-index.html"><strong aria-hidden="true">3.2.</strong> Iteration Stages</a></li><li><ol class="section"><li><a href="development/3-iterations/2-versionControl.html"><strong aria-hidden="true">3.2.1.</strong> Version Control</a></li><li><a href="development/3-iterations/3-changes.html"><strong aria-hidden="true">3.2.2.</strong> Iteration Stages</a></li><li><a href="development/3-iterations/4-feedback.html"><strong aria-hidden="true">3.2.3.</strong> User Feedback</a></li></ol></li><li><a href="development/4-problems/1-index.html"><strong aria-hidden="true">3.3.</strong> Problems experienced</a></li><li><ol class="section"><li><a href="development/4-problems/2-client.html"><strong aria-hidden="true">3.3.1.</strong> Client Problems</a></li><li><a href="development/4-problems/3-api.html"><strong aria-hidden="true">3.3.2.</strong> API Problems</a></li></ol></li><li><a href="development/6-codeAnalysis/1-index.html"><strong aria-hidden="true">3.4.</strong> Code Analysis</a></li><li><ol class="section"><li><a href="development/6-codeAnalysis/2-client.html"><strong aria-hidden="true">3.4.1.</strong> Client Analysis</a></li><li><a href="development/6-codeAnalysis/3-api.html"><strong aria-hidden="true">3.4.2.</strong> API Analysis</a></li></ol></li></ol></li><li><a href="evaluation/1-index/index.html"><strong aria-hidden="true">4.</strong> Evaluation</a></li><li><ol class="section"><li><a href="evaluation/2-testing/1-index.html"><strong aria-hidden="true">4.1.</strong> Testing</a></li><li><ol class="section"><li><a href="evaluation/2-testing/2-signup.html"><strong aria-hidden="true">4.1.1.</strong> Signup Page</a></li><li><a href="evaluation/2-testing/3-login.html"><strong aria-hidden="true">4.1.2.</strong> Login Page</a></li><li><a href="evaluation/2-testing/4-navigation.html"><strong aria-hidden="true">4.1.3.</strong> Navigation</a></li><li><a href="evaluation/2-testing/5-subforum.html"><strong aria-hidden="true">4.1.4.</strong> Subforum Page</a></li><li><a href="evaluation/2-testing/6-post.html"><strong aria-hidden="true">4.1.5.</strong> Post Page</a></li><li><a href="evaluation/2-testing/7-newPost.html"><strong aria-hidden="true">4.1.6.</strong> New Post Page</a></li><li><a href="evaluation/2-testing/8-newSubforum.html"><strong aria-hidden="true">4.1.7.</strong> New Subforum Page</a></li></ol></li><li><a href="evaluation/3-usabilityFeatures/1-index.html"><strong aria-hidden="true">4.2.</strong> Usability Features</a></li><li><a href="evaluation/4-evaluation/1-index.html"><strong aria-hidden="true">4.3.</strong> Final Evaluation</a></li></ol></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="submenu">
                                <li><button class="theme" id="light">Light <span class="default">(default)</span></button></li>
                                <li><button class="theme" id="rust">Rust</button></li>
                                <li><button class="theme" id="coal">Coal</button></li>
                                <li><button class="theme" id="navy">Navy</button></li>
                                <li><button class="theme" id="ayu">Ayu</button></li>
                            </ul>
                        </div>

                        <h1 class="menu-title">Corum Project Report</h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <a class="header" href="development/2-structure/2-monolithMicro.html#monolith-vs-micro" id="monolith-vs-micro"><h1>Monolith vs Micro</h1></a>
<a class="header" href="development/2-structure/2-monolithMicro.html#at-the-start-of-development" id="at-the-start-of-development"><h2>At the Start of Development</h2></a>
<p>At the start of the project, I was pretty certain that I would develop both the
client and the API as one project. This kind of structure is very common when
developing with languages such as PHP. This kind of structure is known as a
'monolith system'.</p>
<p>This structure has the benefit of being conceptually simpler to think about and
easier to actually implement. However, monolith projects do have their
drawbacks. It is harder to test conceptually different components of a system as
they are typically tightly coupled, and it is harder to make large refactors as
the changes might break other parts of the system.</p>
<p>Developing in a 'micro service' mindset lends to code being more testable and
reusable, as components of a system that are conceptually separate are developed
in isolation from each other, meaning that tight coupling of components is
avoided at a management level. It also adheres more to the idea of 'separation
of concerns', as conceptually in the context of Corum, the API doesn't need any
knowledge of the client, it only needs to provide a generic interface to the
data the client needs.</p>
<p>Another benefit of developing micro services are that the services can be
deployed separately, even on different machines. This is a benefit because with
a monolith system, if the machine running it fails for whatever reason, and no
redundancy is in place, the whole system goes down. The way to provide
redundancy to a monolith system is to deploy multiple instances of the whole
system, or to boot an instance when another goes down. This could be less than
ideal because it may be using more system resources than needed, and it could
take longer for the whole system to start up, instead of a single micro service.</p>
<p>Deploying micro services means that different parts of the system can be
provided redundancy independently of each other. This could mean that less
system resources are wasted, and start up times are likely to be faster, meaning
that the system is down for a shorter period of time.</p>
<p>For these reasons above, I decided, during the development of the project, that
I would split the client and the API into separate services.</p>
<a class="header" href="development/2-structure/2-monolithMicro.html#implementing-the-micro-service-architecture" id="implementing-the-micro-service-architecture"><h2>Implementing the Micro Service Architecture</h2></a>
<p>As mentioned above, implementing a monolith system is easier to start, but it
tends to be harder to maintain. I found that during the implementation of Corum
in a micro service architecture that testing and documenting it was much easier.
I believe this was because I only had to think about part of the system at a
single moment in time, reducing the cognitive load that was placed on me.</p>
<a class="header" href="development/2-structure/2-monolithMicro.html#configuration-is-made-easier" id="configuration-is-made-easier"><h3>Configuration is Made Easier</h3></a>
<p>I also found that when I begun separating the two logical parts of Corum,
configuring the tools and libraries that I was using was much simpler. This was
because I didn't have to think as much about if a configuration setting would
cause a conflict. Configuration files were also a lot shorter, so therefore more
understandable at a glance. In the following sub sections I will give concrete
examples of where switching to a micro service architecture made configuring my
tools easier.</p>
<a class="header" href="development/2-structure/2-monolithMicro.html#eslint-my-linter" id="eslint-my-linter"><h4>ESLint (My Linter)</h4></a>
<p>For example, the configuration for ESLint (My linter of choice) that I am using
is different for the client and the API. This is because the two run in
different environments. The client code runs in the browser and the API code
runs on the server. (In the node.js runtime) While browsers and node.js both use
JavaScript, they support a different set of features as well as exposing
different global variables. For example, if I tried to use node's CommonJS
'<code>require</code>' syntax (used to import files into the current file scope) in the
browser, an error would be thrown because there is no global called '<code>require</code>'.
Likewise, if I tried to reference the '<code>document</code>' browser global in a node
environment, an error would also be thrown.</p>
<p>This relates to linting because if I was create Corum as a monolith, the ESLint
config would have to be quite permissive, where syntax and globals valid in both
environments would be allowed. This would have reduced the effectiveness of the
linter because if I did make a mistake like the two mentioned above, it wouldn't
be picked up by the linter. This would mean that I would only find this bug at
runtime, meaning that I would have wasted time that wouldn't have been wasted if
I had a stricter linter configuration.</p>
<p>The problem could be mitigated slightly by having separate directories for both
the client and server, then creating a config file per directory. This would
allow for stricter linting, however it would mean that my editor would not be
able to recognise the configuration file. This means that I wouldn't get the
errors showing in my editor, and I would have to instead rely on running the
linter from the command line. Also, if I wanted to work on both projects at the
same time, I would have to start two instances of the linter for each directory.</p>
<p>This problem wasn't present when I switch over to a micro service architecture.
This was because I could have two separate config files at the root of each
service. This means that my editor correctly picks up both the config files and
I could still have strict configs for the different services.</p>
<a class="header" href="development/2-structure/2-monolithMicro.html#gitignore-file" id="gitignore-file"><h3><code>.gitignore</code> File</h3></a>
<p>I am using version control to manage my project, in particular, Git. The reason
for this is explained in a section later on named 'Version Control'. When using
git you can create a file called '<code>.gitignore</code>' at the root of the repository.
This file tells git what files not to parse for changes. This means that the
files listed in this file are not committed to the repo. It also allows you to
list directories so that entire directories can be ignore, as well as the use of
a wildcard character (<code>*</code>) for pattern matching file names. For example, if you
didn't want to commit an files with the <code>.txt</code> extension, you could list <code>*.txt</code>
as an entry in the file.</p>
<p>When developing Corum as a monolith, the issue was that I wanted to ignore
certain types of files in the client but not in the API and vice versa. This
problem was solved when switching to a micro service architecture because the
client and the API are completely separate git repos, so they can have separate
<code>.gitignore</code> files.</p>
<a class="header" href="development/2-structure/2-monolithMicro.html#editor-configuration-files" id="editor-configuration-files"><h3>Editor Configuration Files</h3></a>
<p>The editor that I am using is Visual Studio Code. (vscode) Vscode allows you to
configure workspace settings for different projects, this includes things such
as recommended editor extensions and their settings. These settings can be found
at the root of the project under a directory called '<code>.vscode</code>'. The API and
client use different libraries, so they would benefit from different editor
extensions. However it wouldn't make much sense to recommend an extension that
is not useful for what it being used. For example, it wouldn't make sense to
recommend any Vue related extensions for the API code, as it doesn't use Vue. By
using a micro service architecture I can have separate configurations for each
service.</p>
<a class="header" href="development/2-structure/2-monolithMicro.html#packagejson-file" id="packagejson-file"><h3><code>package.json</code> File</h3></a>
<p>The <code>package.json</code> file is standard across JavaScript and used to provide
information about the project. For example, you can list the project's name,
version, author and it's dependencies. This information is used by tools that
will be explained soon.</p>
<p>To automate some of the tasks that I do often, I use something called a task
runner. The task runner I am using for corum is called NPM scripts, and it comes
with my package manager by default. I could have used a different task runner
such as gulp but it would have introduced more complexity to the project for not
much gain. All NPM scripts does is run the commands that you specify with a few
nice features. The way you configure NPM scripts is by adding a <code>&quot;scripts&quot;</code>
field to <code>package.json</code>.</p>
<p>Here is a simple example:</p>
<pre><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;node .&quot;,
    &quot;test&quot;: &quot;jest&quot;,
    &quot;deploy&quot;: &quot;yarn test &amp;&amp; yarn start&quot;
  }
}
</code></pre>
<p>In this contrived example, the usefulness of NPM scripts is not very evident at
first glance. Here is what each of these scripts do and how they show the
usefulness of NPM scripts when building coding in JavaScript:</p>
<a class="header" href="development/2-structure/2-monolithMicro.html#start" id="start"><h4><code>&quot;start&quot;</code></h4></a>
<p>Runs the file named <code>index.js</code> in the root of the project. In practice, this
could be used to start something like a web server. Also in practice this
command could be a lot more complicated, for example command line flags could be
passed to alter how the program runs. This shows one of the benefits of using
scripts. The user only has to type a short command such as <code>yarn start</code> to run
an arbitrarily long command. This reduces both time taken to execute a task as
well as making it so the developer doesn't have to remember a long command every
time they want to run it.</p>
<a class="header" href="development/2-structure/2-monolithMicro.html#test" id="test"><h4><code>&quot;test&quot;</code></h4></a>
<p>Runs tests using a testing framework called 'jest'. The testing library would be
installed as a local dependency to the project, meaning that if the user just
typed <code>jest</code> into their command line, it would return an error because the
command isn't available in the global context. (Unless they explicitly installed
it globally on their system which wouldn't make the project very portable) What
NPM scripts is doing is adding the path '<code>./node_modules/.bin</code>' to its PATH
environment variable. (This is how it work on Unix like system at least) If NPM
scripts didn't add this path, then user would have to write
<code>./node_modules/.bin/jest</code> instead of just <code>jest</code>. This NPM scripts feature
makes it a lot easier to write concise, portable scripts.</p>
<a class="header" href="development/2-structure/2-monolithMicro.html#deploy" id="deploy"><h4><code>&quot;deploy&quot;</code></h4></a>
<p>Runs both the <code>&quot;test&quot;</code> and <code>&quot;start&quot;</code> scripts one after each other. In this case
I am using <code>yarn</code> to execute the scripts, but NPM would also work.
(<code>&quot;deploy&quot;: &quot;npm run test &amp;&amp; npm run start&quot;</code>) What this script shows is that you
can compose scripts together. This is useful because it means that individual
scripts can be reused and it can abstract the implementation of the scripts
away. For example, it is quite evident that the <code>deploy</code> script tests and starts
the project just from the names of the scripts it is running.</p>
<a class="header" href="development/2-structure/2-monolithMicro.html#the-problem" id="the-problem"><h4>The Problem</h4></a>
<p>From the sections above, I hope you can see why NPM scripts are very useful in
any type of JavaScript project. The problem is that when there are a lot of
scripts, it is a lot harder to reason about them when reading <code>package.json</code>.
This issue showed itself when developing Corum as a monolith system as I had
scripts for both the client and the API in the same file and sometimes I wanted
to call the scripts by the same name. For example, I wanted a <code>&quot;start&quot;</code> script
for both the client and the API. The client one would start the production ready
web server and the API one would start a production ready docker cluster running
the backing database and the graphcool service. Because you can't have multiple
scripts with the same name for obvious reasons, I had to start prefixing scripts
with what part of the system it started. For example, I had scripts called
<code>&quot;client:start&quot;</code> and <code>&quot;api:start&quot;</code> as well as <code>&quot;client:test&quot;</code> and <code>&quot;api:test&quot;</code>.
This was fine for a few scripts but it got out of hand as more scripts were
added.</p>
<p>When switching to a micro service architecture, there was a separate
<code>package.json</code> file for the client and the API. This meant that I could get rid
of the prefixes that I had given to most scripts. This in turn made it a lot
easier to understand the file and the scripts that could be run at a glance.</p>
<a class="header" href="development/2-structure/2-monolithMicro.html#dependency-and-bundling-issue" id="dependency-and-bundling-issue"><h4>Dependency and Bundling Issue</h4></a>
<p>JavaScript handles dependencies in the following way:</p>
<ul>
<li>The file <code>package.json</code> contains information about the project</li>
<li>An important piece of information is the project dependencies</li>
<li>When installing the dependencies, (with the <code>yarn</code> command) they are placed in
the <code>node_modules</code> folder</li>
</ul>
<p>The API framework I am using, (graphcool) currently bundles the entire contents
of the <code>node_modules</code> folder with the deployed code. This means that when the
project was a monolith, all of the dependencies for the client were also being
bundled with the API code. This was an issue for the following reasons:</p>
<ul>
<li>The API would take up more storage space on the deployed server</li>
<li>It would take significantly more time to bundle the API before it was
deployed. This meant that I was wasting time.</li>
</ul>
<p>By switching to a micro service architecture, the client and the API had
separate dependencies, and therefore had separate <code>node_modules</code> directories.
This meant that graphcool was only bundling the code that it needed to. This did
indeed reduce the amount of storage space the API service used as well as
reduced the built time of the API service considerably. (From about around 30
seconds to roughly 5 seconds, a 600% decrease) This reduced built time meant
that I could spend more time coding rather than waiting around.</p>
<a class="header" href="development/2-structure/2-monolithMicro.html#downsides-compared-to-developing-as-a-monolith" id="downsides-compared-to-developing-as-a-monolith"><h2>Downsides Compared to Developing as a Monolith</h2></a>
<p>While developing Corum in a micro service architecture has a lot of benefits,
there are of course at least some trade offs to be made. Luckily so far, I have
only encountered one issue so far.</p>
<a class="header" href="development/2-structure/2-monolithMicro.html#repeated-prettier-configuration" id="repeated-prettier-configuration"><h3>Repeated Prettier Configuration</h3></a>
<p>Developing in a micro service architecture means that each service can have its
own configuration file. As evident from the above sections, this is usually a
good thing. However, when a configuration file is the same between services,
there is little you can do to deduplicate and share them.</p>
<p>The tool that I ran into configuration problems because of this is called
'prettier'. Prettier is a tool that automatically formats you code to conform to
an opinionated style guide that they determine. This is incredibly useful as it
means that code styling is kept consistent and I don't have to spend any time
formatting the code manually. Prettier does allow some configuration for
controversial styling decisions. For example, I like indenting with 2 spaces, I
prefer writing JavaScript without semicolons, and I prefer strings in JavaScript
to be written only using single quotes.</p>
<p>To keep both projects consistent, I want to have the same styling in both the
client and the API code. To achieve this consistency I need to have two
identical configuration files in each service directory. The issue with this is
that if I want to make a change to my prettier configuration I have to remember
to change it in both services. This problem could be worse if I had more
services as it would have to be changed for each of them.</p>
<a class="header" href="development/2-structure/2-monolithMicro.html#conclusion" id="conclusion"><h2>Conclusion</h2></a>
<p>From the evidence above of implementing this architecture I would say that it
was a success, and it suited Corum more than a monolith structure. While Corum
suits this paradigm, other projects may not suit it as well, so it was important
that I tried developing a monolith system first. It would have been a lot harder
to start building in a micro service architecture if I hadn't felt the pain
points of building as a monolith system.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="development/2-structure/1-index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="development/2-structure/3-client.html" class="mobile-nav-chapters next" title="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="development/2-structure/1-index.html" class="nav-chapters previous" title="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="development/2-structure/3-client.html" class="nav-chapters next" title="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>


        <!-- Local fallback for Font Awesome -->
        <script>
            if (getComputedStyle(document.querySelector(".fa")).fontFamily !== "FontAwesome") {
                var link = document.createElement('link');
                link.rel = 'stylesheet';
                link.type = 'text/css';
                link.href = '_FontAwesome/css/font-awesome.css';
                document.head.insertBefore(link, document.head.firstChild)
            }
        </script>

        
        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3001");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload(true); // force reload from server (not from cache)
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        

        

        

        

        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS script -->
        

    </body>
</html>
